<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>dance</title>
    <link rel="stylesheet" href="main.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="select.js"></script>
    <script src="result.js"></script>
    <script type="text/javascript" src="/eel.js"></script>
  </head>
  <script type="text/javascript">
  </script>
  <body>
    <div class="pagebody">
      <div class="underTheEarth">
	<!-- buttons -->
	<button onclick="history.back()" class="simple_square_btn3" style="width:200px;height:100px">back</button>
	
	<!-- 動画指定場所 -->
	<div class="movie">
	  <video id="movie"></video>
	  <canvas id="canvas" height="950px" width="1670px"></canvas>
	</div>
	<!-- 小窓 -->
	<div class="camera">
	  <video id="camera" width="300" height="250" style="-webkit-transform: scaleX(-1);" autoplay="1"></video>
	</div>

	
	<!-- <canvas id="canvas" width="1200px" height="1000px"></canvas> -->

	<br>
	<!-- buttons -->
	<div class="bottom">
	  <button onclick="Play1()" class="btn-flat-stripe1" style="width:200px;height:100px">start</button>
	  <button onclick="Pause1()" class="btn-flat-stripe2" style="width:200px;height:100px">stop</button>
	  <button onclick="PlayFromFirst1()" class="btn-flat-stripe3" style="width:200px;height:100px">restart</button>	
	</div>
	
	<!-- 再生終了すると結果画面へ -->
	<!--
	    <video playsinline muted autoplay onended="GoToResult()"></video>
	    -->
	    
      </div>

      <script type="text/javascript">
	
	//最初から再生
	
	window.onload = () => {
		document.getElementById('movie').setAttribute("src", localStorage.music_path);
	    const video  = document.querySelector("#camera");
	   //const canvas = document.querySelector("#picture");
	   // const se     = document.querySelector('#se');

	    //カメラ設定
	    const constraints = {
		audio: false,
		video: {
		    width: 500,
		    height: 300,
		    facingMode: "user"   // フロントカメラを利用する
		    // facingMode: { exact: "environment" }  // リアカメラを利用する場合
		}
	    };

	    //カメラを<video>と同期
	    navigator.mediaDevices.getUserMedia(constraints)
		.then( (stream) => {
		    video.srcObject = stream;
		    video.onloadedmetadata = (e) => {
			video.play();
		    };
		})
		.catch( (err) => {
		    console.log(err.name + ": " + err.message);
		});

	};
	
      </script>

      <script src="playing.js"></script>
    </div>
  </body>
</html>
